from ast import arg
from web3.auto import w3
from web3 import exceptions
from enum import Enum
from client.pycontract.DTO.DTO import UserDTO



class Database:
    abi = """[{"inputs":[{"internalType":"address","name":"_bank","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"address","name":"shopAddr","type":"address"},{"internalType":"string","name":"number","type":"string"},{"internalType":"string","name":"city","type":"string"}],"name":"add_shop","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"admin_info","outputs":[{"internalType":"string[]","name":"adminLogin","type":"string[]"},{"internalType":"string[]","name":"requests","type":"string[]"},{"internalType":"address[]","name":"shopAddrList","type":"address[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"shopAddr","type":"address"}],"name":"ask_money","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"login","type":"string"},{"internalType":"string","name":"password","type":"string"}],"name":"auth","outputs":[{"components":[{"internalType":"address","name":"userAddr","type":"address"},{"internalType":"string","name":"login","type":"string"},{"internalType":"string","name":"password","type":"string"},{"internalType":"string","name":"fio","type":"string"},{"internalType":"string","name":"status","type":"string"}],"internalType":"struct User","name":"","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"bank","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"user_login","type":"string"}],"name":"buyer_info","outputs":[{"internalType":"address","name":"userAddress","type":"address"},{"internalType":"string","name":"fio","type":"string"},{"internalType":"address[]","name":"shopAddressList","type":"address[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"userLogin","type":"string"},{"internalType":"bool","name":"isAccept","type":"bool"}],"name":"check_request","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"autor","type":"string"},{"internalType":"address","name":"shopAddr","type":"address"}],"name":"create_request_buyer","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"autor","type":"string"}],"name":"create_request_seller","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"shopAddr","type":"address"},{"internalType":"string","name":"autorLogin","type":"string"},{"internalType":"string","name":"message","type":"string"},{"internalType":"uint256","name":"likes","type":"uint256"},{"internalType":"uint256","name":"dislikes","type":"uint256"},{"internalType":"uint256","name":"mark","type":"uint256"}],"name":"create_review","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"shopAddr","type":"address"}],"name":"delete_shop","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"user_login","type":"string"},{"internalType":"address","name":"shopAddr","type":"address"},{"internalType":"string","name":"autorLogin","type":"string"}],"name":"dislike_review","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"get_admins","outputs":[{"internalType":"string[]","name":"","type":"string[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"get_requests","outputs":[{"internalType":"string[]","name":"","type":"string[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"get_shop_requests","outputs":[{"internalType":"address[]","name":"","type":"address[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"get_shops","outputs":[{"internalType":"address[]","name":"","type":"address[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"shopAddr","type":"address"},{"internalType":"string","name":"userLogin","type":"string"}],"name":"get_user_review","outputs":[{"components":[{"internalType":"string","name":"autorLogin","type":"string"},{"internalType":"string","name":"message","type":"string"},{"internalType":"uint256","name":"likes","type":"uint256"},{"internalType":"uint256","name":"dislikes","type":"uint256"},{"internalType":"uint256","name":"mark","type":"uint256"}],"internalType":"struct Review","name":"","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"shopAddr","type":"address"}],"name":"give_shop_money","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"user_login","type":"string"},{"internalType":"address","name":"shopAddr","type":"address"},{"internalType":"string","name":"autorLogin","type":"string"}],"name":"like_review","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"userAddr","type":"address"},{"internalType":"string","name":"login","type":"string"},{"internalType":"string","name":"password","type":"string"},{"internalType":"string","name":"fio","type":"string"},{"internalType":"string","name":"status","type":"string"}],"name":"register_admin","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"userAddr","type":"address"},{"internalType":"string","name":"login","type":"string"},{"internalType":"string","name":"password","type":"string"},{"internalType":"string","name":"fio","type":"string"},{"internalType":"string","name":"status","type":"string"}],"name":"register_buyer","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"userAddr","type":"address"},{"internalType":"string","name":"login","type":"string"},{"internalType":"string","name":"password","type":"string"},{"internalType":"string","name":"fio","type":"string"},{"internalType":"string","name":"status","type":"string"},{"internalType":"address","name":"shopAddr","type":"address"}],"name":"register_seller","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"","type":"string"}],"name":"sellerToShop","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"seller_login","type":"string"}],"name":"seller_info","outputs":[{"internalType":"string","name":"fio","type":"string"},{"internalType":"string","name":"city","type":"string"},{"internalType":"address","name":"shopAddr","type":"address"},{"internalType":"address[]","name":"shopAddrList","type":"address[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"shopDebts","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"shopSellers","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"shops","outputs":[{"internalType":"string","name":"number","type":"string"},{"internalType":"string","name":"city","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"shopsReviews","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"string","name":"","type":"string"},{"internalType":"string","name":"","type":"string"}],"name":"userActions","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"","type":"string"}],"name":"userRequest","outputs":[{"internalType":"string","name":"autor","type":"string"},{"internalType":"string","name":"currentRole","type":"string"},{"internalType":"string","name":"desiredRole","type":"string"},{"internalType":"bool","name":"checked","type":"bool"},{"internalType":"address","name":"shopAddr","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"","type":"string"},{"internalType":"address","name":"","type":"address"}],"name":"userReviews","outputs":[{"internalType":"string","name":"autorLogin","type":"string"},{"internalType":"string","name":"message","type":"string"},{"internalType":"uint256","name":"likes","type":"uint256"},{"internalType":"uint256","name":"dislikes","type":"uint256"},{"internalType":"uint256","name":"mark","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"","type":"string"}],"name":"users","outputs":[{"internalType":"address","name":"userAddr","type":"address"},{"internalType":"string","name":"login","type":"string"},{"internalType":"string","name":"password","type":"string"},{"internalType":"string","name":"fio","type":"string"},{"internalType":"string","name":"status","type":"string"}],"stateMutability":"view","type":"function"}]"""
    bin = "60806040523480156200001157600080fd5b5060405162005ee138038062005ee18339818101604052810190620000379190620002c2565b80600260006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506040518060a001604052808273ffffffffffffffffffffffffffffffffffffffff1681526020016040518060400160405280600481526020017f62616e6b0000000000000000000000000000000000000000000000000000000081525081526020016040518060400160405280600481526020017f62616e6b0000000000000000000000000000000000000000000000000000000081525081526020016040518060400160405280600481526020017f62616e6b0000000000000000000000000000000000000000000000000000000081525081526020016040518060400160405280600481526020017f62616e6b00000000000000000000000000000000000000000000000000000000815250815250600360405162000199906200034f565b908152602001604051809103902060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506020820151816001019081620002059190620005e0565b5060408201518160020190816200021d9190620005e0565b506060820151816003019081620002359190620005e0565b5060808201518160040190816200024d9190620005e0565b5090505050620006c7565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60006200028a826200025d565b9050919050565b6200029c816200027d565b8114620002a857600080fd5b50565b600081519050620002bc8162000291565b92915050565b600060208284031215620002db57620002da62000258565b5b6000620002eb84828501620002ab565b91505092915050565b600081905092915050565b7f62616e6b00000000000000000000000000000000000000000000000000000000600082015250565b600062000337600483620002f4565b91506200034482620002ff565b600482019050919050565b60006200035c8262000328565b9150819050919050565b600081519050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b60006002820490506001821680620003e857607f821691505b602082108103620003fe57620003fd620003a0565b5b50919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b600060088302620004687fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8262000429565b62000474868362000429565b95508019841693508086168417925050509392505050565b6000819050919050565b6000819050919050565b6000620004c1620004bb620004b5846200048c565b62000496565b6200048c565b9050919050565b6000819050919050565b620004dd83620004a0565b620004f5620004ec82620004c8565b84845462000436565b825550505050565b600090565b6200050c620004fd565b62000519818484620004d2565b505050565b5b8181101562000541576200053560008262000502565b6001810190506200051f565b5050565b601f82111562000590576200055a8162000404565b620005658462000419565b8101602085101562000575578190505b6200058d620005848562000419565b8301826200051e565b50505b505050565b600082821c905092915050565b6000620005b56000198460080262000595565b1980831691505092915050565b6000620005d08383620005a2565b9150826002028217905092915050565b620005eb8262000366565b67ffffffffffffffff81111562000607576200060662000371565b5b620006138254620003cf565b6200062082828562000545565b600060209050601f83116001811462000658576000841562000643578287015190505b6200064f8582620005c2565b865550620006bf565b601f198416620006688662000404565b60005b8281101562000692578489015182556001820191506020850194506020810190506200066b565b86831015620006b25784890151620006ae601f891682620005a2565b8355505b6001600288020188555050505b505050505050565b61580a80620006d76000396000f3fe608060405234801561001057600080fd5b50600436106101f05760003560e01c80637fdbe2311161010f578063b69701ab116100a2578063e37332ba11610071578063e37332ba14610611578063e51679f414610645578063ee86e3c014610661578063f2c6f34c1461067d576101f0565b8063b69701ab14610575578063d741d01414610593578063ddfd0e4e146105af578063debd53b0146105e1576101f0565b806395b95a00116100de57806395b95a00146104d4578063999d1f85146104f05780639ee80ed51461050e578063a37e938114610542576101f0565b80637fdbe231146104625780638794b69d1461047e57806387e79c251461049c57806395386d3d146104b8576101f0565b806348eed2131161018757806363df19691161015657806363df1969146103c4578063689e1c03146103e057806376cdb03b146104145780637a28f14414610432576101f0565b806348eed2131461032857806353be74021461035857806356f11e03146103785780635eaf1bd214610394576101f0565b806335349b20116101c357806335349b20146102b65780633c5fd273146102d25780634538ee1e146102ee578063455bfbf21461030a576101f0565b80630455487f146101f557806309d9f7a61461022557806323e92804146102555780632dca1fcc14610285575b600080fd5b61020f600480360381019061020a9190614250565b610699565b60405161021c91906142f6565b60405180910390f35b61023f600480360381019061023a9190614311565b610701565b60405161024c9190614369565b60405180910390f35b61026f600480360381019061026a9190614384565b61074a565b60405161027c91906144f5565b60405180910390f35b61029f600480360381019061029a9190614517565b610902565b6040516102ad92919061458e565b60405180910390f35b6102d060048036038101906102cb91906145c5565b610a36565b005b6102ec60048036038101906102e79190614311565b610c27565b005b610308600480360381019061030391906146b0565b610dda565b005b610312610fa8565b60405161031f91906147fd565b60405180910390f35b610342600480360381019061033d919061481f565b611081565b60405161034f9190614931565b60405180910390f35b61036061141e565b60405161036f93929190614a02565b60405180910390f35b610392600480360381019061038d9190614517565b611659565b005b6103ae60048036038101906103a99190614a7a565b611afa565b6040516103bb9190614aba565b60405180910390f35b6103de60048036038101906103d991906145c5565b611bb3565b005b6103fa60048036038101906103f59190614311565b611d6f565b60405161040b959493929190614adc565b60405180910390f35b61041c611ffb565b6040516104299190614369565b60405180910390f35b61044c60048036038101906104479190614a7a565b612021565b6040516104599190614aba565b60405180910390f35b61047c60048036038101906104779190614517565b6120da565b005b6104866123a5565b60405161049391906147fd565b60405180910390f35b6104b660048036038101906104b19190614517565b61247e565b005b6104d260048036038101906104cd9190614b77565b6124e4565b005b6104ee60048036038101906104e99190614bd3565b612bf1565b005b6104f8612da4565b6040516105059190614c2f565b60405180910390f35b61052860048036038101906105239190614bd3565b612e32565b604051610539959493929190614c60565b60405180910390f35b61055c60048036038101906105579190614311565b612f9b565b60405161056c9493929190614cc1565b60405180910390f35b61057d61322a565b60405161058a9190614c2f565b60405180910390f35b6105ad60048036038101906105a891906146b0565b6132b8565b005b6105c960048036038101906105c49190614311565b613486565b6040516105d893929190614d1b565b60405180910390f35b6105fb60048036038101906105f69190614517565b61360b565b6040516106089190614d60565b60405180910390f35b61062b60048036038101906106269190614311565b613623565b60405161063c959493929190614d7b565b60405180910390f35b61065f600480360381019061065a9190614250565b613834565b005b61067b60048036038101906106769190614de3565b613b03565b005b61069760048036038101906106929190614ea8565b613ce2565b005b600d6020528260005260406000208280516020810182018051848252602083016020850120818352809550505050505081805160208101820180518482526020830160208501208183528095505050505050600092509250509054906101000a900460ff1681565b6009818051602081018201805184825260208301602085012081835280955050505050506000915054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b610752613fc7565b600c826040516107629190614fe1565b908152602001604051809103902060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206040518060a00160405290816000820180546107c890615027565b80601f01602080910402602001604051908101604052809291908181526020018280546107f490615027565b80156108415780601f1061081657610100808354040283529160200191610841565b820191906000526020600020905b81548152906001019060200180831161082457829003601f168201915b5050505050815260200160018201805461085a90615027565b80601f016020809104026020016040519081016040528092919081815260200182805461088690615027565b80156108d35780601f106108a8576101008083540402835291602001916108d3565b820191906000526020600020905b8154815290600101906020018083116108b657829003601f168201915b505050505081526020016002820154815260200160038201548152602001600482015481525050905092915050565b600a60205280600052604060002060009150905080600001805461092590615027565b80601f016020809104026020016040519081016040528092919081815260200182805461095190615027565b801561099e5780601f106109735761010080835404028352916020019161099e565b820191906000526020600020905b81548152906001019060200180831161098157829003601f168201915b5050505050908060010180546109b390615027565b80601f01602080910402602001604051908101604052809291908181526020018280546109df90615027565b8015610a2c5780601f10610a0157610100808354040283529160200191610a2c565b820191906000526020600020905b815481529060010190602001808311610a0f57829003601f168201915b5050505050905082565b83600073ffffffffffffffffffffffffffffffffffffffff16600382604051610a5f9190614fe1565b908152602001604051809103902060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614610ae7576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ade906150a4565b60405180910390fd5b600085908060018154018082558091505060019003906000526020600020016000909190919091509081610b1b9190615270565b5060006040518060a001604052808873ffffffffffffffffffffffffffffffffffffffff16815260200187815260200186815260200185815260200184815250905080600387604051610b6e9190614fe1565b908152602001604051809103902060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506020820151816001019081610bd89190615270565b506040820151816002019081610bee9190615270565b506060820151816003019081610c049190615270565b506080820151816004019081610c1a9190615270565b5090505050505050505050565b60006040518060a001604052808381526020016040518060400160405280600681526020017f73656c6c6572000000000000000000000000000000000000000000000000000081525081526020016040518060400160405280600581526020017f62757965720000000000000000000000000000000000000000000000000000008152508152602001600015158152602001600073ffffffffffffffffffffffffffffffffffffffff16815250905080600483604051610ce79190614fe1565b90815260200160405180910390206000820151816000019081610d0a9190615270565b506020820151816001019081610d209190615270565b506040820151816002019081610d369190615270565b5060608201518160030160006101000a81548160ff02191690831515021790555060808201518160030160016101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550905050600582908060018154018082558091505060019003906000526020600020016000909190919091509081610dd59190615270565b505050565b600d60008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081604051610e279190614fe1565b908152602001604051809103902083604051610e439190614fe1565b908152602001604051809103902060009054906101000a900460ff1615610e9f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610e969061538e565b60405180910390fd5b600c81604051610eaf9190614fe1565b908152602001604051809103902060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206003016000815480929190610f0e906153dd565b91905055506001600d60008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002082604051610f629190614fe1565b908152602001604051809103902084604051610f7e9190614fe1565b908152602001604051809103902060006101000a81548160ff021916908315150217905550505050565b60606005805480602002602001604051908101604052809291908181526020016000905b82821015611078578382906000526020600020018054610feb90615027565b80601f016020809104026020016040519081016040528092919081815260200182805461101790615027565b80156110645780601f1061103957610100808354040283529160200191611064565b820191906000526020600020905b81548152906001019060200180831161104757829003601f168201915b505050505081526020019060010190610fcc565b50505050905090565b611089613ff6565b600060038460405161109b9190614fe1565b90815260200160405180910390206040518060a00160405290816000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200160018201805461111a90615027565b80601f016020809104026020016040519081016040528092919081815260200182805461114690615027565b80156111935780601f1061116857610100808354040283529160200191611193565b820191906000526020600020905b81548152906001019060200180831161117657829003601f168201915b505050505081526020016002820180546111ac90615027565b80601f01602080910402602001604051908101604052809291908181526020018280546111d890615027565b80156112255780601f106111fa57610100808354040283529160200191611225565b820191906000526020600020905b81548152906001019060200180831161120857829003601f168201915b5050505050815260200160038201805461123e90615027565b80601f016020809104026020016040519081016040528092919081815260200182805461126a90615027565b80156112b75780601f1061128c576101008083540402835291602001916112b7565b820191906000526020600020905b81548152906001019060200180831161129a57829003601f168201915b505050505081526020016004820180546112d090615027565b80601f01602080910402602001604051908101604052809291908181526020018280546112fc90615027565b80156113495780601f1061131e57610100808354040283529160200191611349565b820191906000526020600020905b81548152906001019060200180831161132c57829003601f168201915b5050505050815250509050600073ffffffffffffffffffffffffffffffffffffffff16816000015173ffffffffffffffffffffffffffffffffffffffff16036113c7576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016113be90615471565b60405180910390fd5b6113d5816040015184613f6e565b611414576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161140b906154dd565b60405180910390fd5b8091505092915050565b60608060606000805480602002602001604051908101604052809291908181526020016000905b828210156114f157838290600052602060002001805461146490615027565b80601f016020809104026020016040519081016040528092919081815260200182805461149090615027565b80156114dd5780601f106114b2576101008083540402835291602001916114dd565b820191906000526020600020905b8154815290600101906020018083116114c057829003601f168201915b505050505081526020019060010190611445565b5050505092506005805480602002602001604051908101604052809291908181526020016000905b828210156115c557838290600052602060002001805461153890615027565b80601f016020809104026020016040519081016040528092919081815260200182805461156490615027565b80156115b15780601f10611586576101008083540402835291602001916115b1565b820191906000526020600020905b81548152906001019060200180831161159457829003601f168201915b505050505081526020019060010190611519565b505050509150600180548060200260200160405190810160405280929190818152602001828054801561164d57602002820191906000526020600020905b8160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019060010190808311611603575b50505050509050909192565b61173c600a60008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060000180546116a990615027565b80601f01602080910402602001604051908101604052809291908181526020018280546116d590615027565b80156117225780601f106116f757610100808354040283529160200191611722565b820191906000526020600020905b81548152906001019060200180831161170557829003601f168201915b505050505060405180602001604052806000815250613f6e565b1561177c576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161177390615549565b60405180910390fd5b6000805b600180549050811015611815578273ffffffffffffffffffffffffffffffffffffffff16600182815481106117b8576117b7615569565b5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1603611802578091505b808061180d906153dd565b915050611780565b5060018080805490506118289190615598565b8154811061183957611838615569565b5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff166001828154811061187857611877615569565b5b9060005260206000200160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060018054806118d2576118d16155cc565b5b6001900381819060005260206000200160006101000a81549073ffffffffffffffffffffffffffffffffffffffff0219169055905560005b600860008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002080549050811015611af5576000600860008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002082815481106119a7576119a6615569565b5b9060005260206000200180546119bc90615027565b80601f01602080910402602001604051908101604052809291908181526020018280546119e890615027565b8015611a355780601f10611a0a57610100808354040283529160200191611a35565b820191906000526020600020905b815481529060010190602001808311611a1857829003601f168201915b505050505090506040518060400160405280600581526020017f6275796572000000000000000000000000000000000000000000000000000000815250600382604051611a829190614fe1565b90815260200160405180910390206004019081611a9f9190615270565b50600981604051611ab09190614fe1565b908152602001604051809103902060006101000a81549073ffffffffffffffffffffffffffffffffffffffff0219169055508080611aed906153dd565b91505061190a565b505050565b600b6020528160005260406000208181548110611b1657600080fd5b90600052602060002001600091509150508054611b3290615027565b80601f0160208091040260200160405190810160405280929190818152602001828054611b5e90615027565b8015611bab5780601f10611b8057610100808354040283529160200191611bab565b820191906000526020600020905b815481529060010190602001808311611b8e57829003601f168201915b505050505081565b83600073ffffffffffffffffffffffffffffffffffffffff16600382604051611bdc9190614fe1565b908152602001604051809103902060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614611c64576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611c5b906150a4565b60405180910390fd5b60006040518060a001604052808873ffffffffffffffffffffffffffffffffffffffff16815260200187815260200186815260200185815260200184815250905080600387604051611cb69190614fe1565b908152602001604051809103902060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506020820151816001019081611d209190615270565b506040820151816002019081611d369190615270565b506060820151816003019081611d4c9190615270565b506080820151816004019081611d629190615270565b5090505050505050505050565b6003818051602081018201805184825260208301602085012081835280955050505050506000915090508060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690806001018054611dce90615027565b80601f0160208091040260200160405190810160405280929190818152602001828054611dfa90615027565b8015611e475780601f10611e1c57610100808354040283529160200191611e47565b820191906000526020600020905b815481529060010190602001808311611e2a57829003601f168201915b505050505090806002018054611e5c90615027565b80601f0160208091040260200160405190810160405280929190818152602001828054611e8890615027565b8015611ed55780601f10611eaa57610100808354040283529160200191611ed5565b820191906000526020600020905b815481529060010190602001808311611eb857829003601f168201915b505050505090806003018054611eea90615027565b80601f0160208091040260200160405190810160405280929190818152602001828054611f1690615027565b8015611f635780601f10611f3857610100808354040283529160200191611f63565b820191906000526020600020905b815481529060010190602001808311611f4657829003601f168201915b505050505090806004018054611f7890615027565b80601f0160208091040260200160405190810160405280929190818152602001828054611fa490615027565b8015611ff15780601f10611fc657610100808354040283529160200191611ff1565b820191906000526020600020905b815481529060010190602001808311611fd457829003601f168201915b5050505050905085565b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6008602052816000526040600020818154811061203d57600080fd5b9060005260206000200160009150915050805461205990615027565b80601f016020809104026020016040519081016040528092919081815260200182805461208590615027565b80156120d25780601f106120a7576101008083540402835291602001916120d2565b820191906000526020600020905b8154815290600101906020018083116120b557829003601f168201915b505050505081565b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161461216a576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161216190615647565b60405180910390fd5b8073ffffffffffffffffffffffffffffffffffffffff166108fc683635c9adc5dea000009081150290604051600060405180830381858888f193505050501580156121b9573d6000803e3d6000fd5b50683635c9adc5dea00000600660008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282546122129190615667565b9250508190555060005b6007805490508110156123a1576007818154811061223d5761223c615569565b5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff160361238e57600760016007805490506122ae9190615598565b815481106122bf576122be615569565b5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16600782815481106122fe576122fd615569565b5b9060005260206000200160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506007805480612358576123576155cc565b5b6001900381819060005260206000200160006101000a81549073ffffffffffffffffffffffffffffffffffffffff021916905590555b8080612399906153dd565b91505061221c565b5050565b60606000805480602002602001604051908101604052809291908181526020016000905b828210156124755783829060005260206000200180546123e890615027565b80601f016020809104026020016040519081016040528092919081815260200182805461241490615027565b80156124615780601f1061243657610100808354040283529160200191612461565b820191906000526020600020905b81548152906001019060200180831161244457829003601f168201915b5050505050815260200190600101906123c9565b50505050905090565b6007819080600181540180825580915050600190039060005260206000200160009091909190916101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050565b60006004836040516124f69190614fe1565b90815260200160405180910390206040518060a001604052908160008201805461251f90615027565b80601f016020809104026020016040519081016040528092919081815260200182805461254b90615027565b80156125985780601f1061256d57610100808354040283529160200191612598565b820191906000526020600020905b81548152906001019060200180831161257b57829003601f168201915b505050505081526020016001820180546125b190615027565b80601f01602080910402602001604051908101604052809291908181526020018280546125dd90615027565b801561262a5780601f106125ff5761010080835404028352916020019161262a565b820191906000526020600020905b81548152906001019060200180831161260d57829003601f168201915b5050505050815260200160028201805461264390615027565b80601f016020809104026020016040519081016040528092919081815260200182805461266f90615027565b80156126bc5780601f10612691576101008083540402835291602001916126bc565b820191906000526020600020905b81548152906001019060200180831161269f57829003601f168201915b505050505081526020016003820160009054906101000a900460ff161515151581526020016003820160019054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681525050905081156127725780604001516003846040516127539190614fe1565b908152602001604051809103902060040190816127709190615270565b505b600073ffffffffffffffffffffffffffffffffffffffff16816080015173ffffffffffffffffffffffffffffffffffffffff16146128865760086000826080015173ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208390806001815401808255809150506001900390600052602060002001600090919091909150908161281f9190615270565b5080608001516009846040516128359190614fe1565b908152602001604051809103902060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550612bb2565b60005b60086000836080015173ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002080549050811015612bb0576129c860086000846080015173ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020828154811061292f5761292e615569565b5b90600052602060002001805461294490615027565b80601f016020809104026020016040519081016040528092919081815260200182805461297090615027565b80156129bd5780601f10612992576101008083540402835291602001916129bd565b820191906000526020600020905b8154815290600101906020018083116129a057829003601f168201915b505050505085613f6e565b15612b9d5760086000836080015173ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600160086000856080015173ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002080549050612a639190615598565b81548110612a7457612a73615569565b5b9060005260206000200160086000846080015173ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208281548110612ad357612ad2615569565b5b906000526020600020019081612ae991906156c6565b5060086000836080015173ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020805480612b3d57612b3c6155cc565b5b600190038181906000526020600020016000612b59919061403b565b9055600984604051612b6b9190614fe1565b908152602001604051809103902060006101000a81549073ffffffffffffffffffffffffffffffffffffffff02191690555b8080612ba8906153dd565b915050612889565b505b6001600484604051612bc49190614fe1565b908152602001604051809103902060030160006101000a81548160ff021916908315150217905550505050565b60006040518060a001604052808481526020016040518060400160405280600581526020017f627579657200000000000000000000000000000000000000000000000000000081525081526020016040518060400160405280600681526020017f73656c6c6572000000000000000000000000000000000000000000000000000081525081526020016000151581526020018373ffffffffffffffffffffffffffffffffffffffff16815250905080600484604051612cb09190614fe1565b90815260200160405180910390206000820151816000019081612cd39190615270565b506020820151816001019081612ce99190615270565b506040820151816002019081612cff9190615270565b5060608201518160030160006101000a81548160ff02191690831515021790555060808201518160030160016101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550905050600583908060018154018082558091505060019003906000526020600020016000909190919091509081612d9e9190615270565b50505050565b60606001805480602002602001604051908101604052809291908181526020018280548015612e2857602002820191906000526020600020905b8160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019060010190808311612dde575b5050505050905090565b600c8280516020810182018051848252602083016020850120818352809550505050505060205280600052604060002060009150915050806000018054612e7890615027565b80601f0160208091040260200160405190810160405280929190818152602001828054612ea490615027565b8015612ef15780601f10612ec657610100808354040283529160200191612ef1565b820191906000526020600020905b815481529060010190602001808311612ed457829003601f168201915b505050505090806001018054612f0690615027565b80601f0160208091040260200160405190810160405280929190818152602001828054612f3290615027565b8015612f7f5780601f10612f5457610100808354040283529160200191612f7f565b820191906000526020600020905b815481529060010190602001808311612f6257829003601f168201915b5050505050908060020154908060030154908060040154905085565b60608060006060600385604051612fb29190614fe1565b90815260200160405180910390206003018054612fce90615027565b80601f0160208091040260200160405190810160405280929190818152602001828054612ffa90615027565b80156130475780601f1061301c57610100808354040283529160200191613047565b820191906000526020600020905b81548152906001019060200180831161302a57829003601f168201915b50505050509350600a60006009876040516130629190614fe1565b908152602001604051809103902060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060010180546130d990615027565b80601f016020809104026020016040519081016040528092919081815260200182805461310590615027565b80156131525780601f1061312757610100808354040283529160200191613152565b820191906000526020600020905b81548152906001019060200180831161313557829003601f168201915b505050505092506009856040516131699190614fe1565b908152602001604051809103902060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169150600180548060200260200160405190810160405280929190818152602001828054801561321c57602002820191906000526020600020905b8160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190600101908083116131d2575b505050505090509193509193565b606060078054806020026020016040519081016040528092919081815260200182805480156132ae57602002820191906000526020600020905b8160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019060010190808311613264575b5050505050905090565b600d60008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020816040516133059190614fe1565b9081526020016040518091039020836040516133219190614fe1565b908152602001604051809103902060009054906101000a900460ff161561337d576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016133749061538e565b60405180910390fd5b600c8160405161338d9190614fe1565b908152602001604051809103902060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020160008154809291906133ec906153dd565b91905055506001600d60008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020826040516134409190614fe1565b90815260200160405180910390208460405161345c9190614fe1565b908152602001604051809103902060006101000a81548160ff021916908315150217905550505050565b600060608060038460405161349b9190614fe1565b908152602001604051809103902060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1692506003846040516134df9190614fe1565b908152602001604051809103902060030180546134fb90615027565b80601f016020809104026020016040519081016040528092919081815260200182805461352790615027565b80156135745780601f1061354957610100808354040283529160200191613574565b820191906000526020600020905b81548152906001019060200180831161355757829003601f168201915b5050505050915060018054806020026020016040519081016040528092919081815260200182805480156135fd57602002820191906000526020600020905b8160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190600101908083116135b3575b505050505090509193909250565b60066020528060005260406000206000915090505481565b60048180516020810182018051848252602083016020850120818352809550505050505060009150905080600001805461365c90615027565b80601f016020809104026020016040519081016040528092919081815260200182805461368890615027565b80156136d55780601f106136aa576101008083540402835291602001916136d5565b820191906000526020600020905b8154815290600101906020018083116136b857829003601f168201915b5050505050908060010180546136ea90615027565b80601f016020809104026020016040519081016040528092919081815260200182805461371690615027565b80156137635780601f1061373857610100808354040283529160200191613763565b820191906000526020600020905b81548152906001019060200180831161374657829003601f168201915b50505050509080600201805461377890615027565b80601f01602080910402602001604051908101604052809291908181526020018280546137a490615027565b80156137f15780601f106137c6576101008083540402835291602001916137f1565b820191906000526020600020905b8154815290600101906020018083116137d457829003601f168201915b5050505050908060030160009054906101000a900460ff16908060030160019054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905085565b80600073ffffffffffffffffffffffffffffffffffffffff1660038260405161385d9190614fe1565b908152602001604051809103902060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16146138e5576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016138dc906150a4565b60405180910390fd5b6001849080600181540180825580915050600190039060005260206000200160009091909190916101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550604051806040016040528084815260200183815250600a60008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008201518160000190816139b19190615270565b5060208201518160010190816139c79190615270565b509050506040518060a001604052808573ffffffffffffffffffffffffffffffffffffffff1681526020018381526020018381526020018381526020016040518060400160405280600481526020017f73686f7000000000000000000000000000000000000000000000000000000000815250815250600383604051613a4d9190614fe1565b908152602001604051809103902060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506020820151816001019081613ab79190615270565b506040820151816002019081613acd9190615270565b506060820151816003019081613ae39190615270565b506080820151816004019081613af99190615270565b5090505050505050565b60006040518060a00160405280878152602001868152602001858152602001848152602001838152509050600b60008873ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002086908060018154018082558091505060019003906000526020600020016000909190919091509081613b9f9190615270565b5080600c87604051613bb19190614fe1565b908152602001604051809103902060008973ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000820151816000019081613c119190615270565b506020820151816001019081613c279190615270565b506040820151816002015560608201518160030155608082015181600401559050506001600d60008973ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002087604051613c989190614fe1565b908152602001604051809103902087604051613cb49190614fe1565b908152602001604051809103902060006101000a81548160ff02191690831515021790555050505050505050565b84600073ffffffffffffffffffffffffffffffffffffffff16600382604051613d0b9190614fe1565b908152602001604051809103902060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614613d93576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401613d8a906150a4565b60405180910390fd5b60006040518060a001604052808973ffffffffffffffffffffffffffffffffffffffff16815260200188815260200187815260200186815260200185815250905080600388604051613de59190614fe1565b908152602001604051809103902060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506020820151816001019081613e4f9190615270565b506040820151816002019081613e659190615270565b506060820151816003019081613e7b9190615270565b506080820151816004019081613e919190615270565b50905050600860008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002087908060018154018082558091505060019003906000526020600020016000909190919091509081613f069190615270565b5082600988604051613f189190614fe1565b908152602001604051809103902060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505050505050505050565b600081604051602001613f819190614fe1565b6040516020818303038152906040528051906020012083604051602001613fa89190614fe1565b6040516020818303038152906040528051906020012014905092915050565b6040518060a0016040528060608152602001606081526020016000815260200160008152602001600081525090565b6040518060a00160405280600073ffffffffffffffffffffffffffffffffffffffff168152602001606081526020016060815260200160608152602001606081525090565b50805461404790615027565b6000825580601f106140595750614078565b601f016020900490600052602060002090810190614077919061407b565b5b50565b5b8082111561409457600081600090555060010161407c565b5090565b6000604051905090565b600080fd5b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60006140d7826140ac565b9050919050565b6140e7816140cc565b81146140f257600080fd5b50565b600081359050614104816140de565b92915050565b600080fd5b600080fd5b6000601f19601f8301169050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b61415d82614114565b810181811067ffffffffffffffff8211171561417c5761417b614125565b5b80604052505050565b600061418f614098565b905061419b8282614154565b919050565b600067ffffffffffffffff8211156141bb576141ba614125565b5b6141c482614114565b9050602081019050919050565b82818337600083830152505050565b60006141f36141ee846141a0565b614185565b90508281526020810184848401111561420f5761420e61410f565b5b61421a8482856141d1565b509392505050565b600082601f8301126142375761423661410a565b5b81356142478482602086016141e0565b91505092915050565b600080600060608486031215614269576142686140a2565b5b6000614277868287016140f5565b935050602084013567ffffffffffffffff811115614298576142976140a7565b5b6142a486828701614222565b925050604084013567ffffffffffffffff8111156142c5576142c46140a7565b5b6142d186828701614222565b9150509250925092565b60008115159050919050565b6142f0816142db565b82525050565b600060208201905061430b60008301846142e7565b92915050565b600060208284031215614327576143266140a2565b5b600082013567ffffffffffffffff811115614345576143446140a7565b5b61435184828501614222565b91505092915050565b614363816140cc565b82525050565b600060208201905061437e600083018461435a565b92915050565b6000806040838503121561439b5761439a6140a2565b5b60006143a9858286016140f5565b925050602083013567ffffffffffffffff8111156143ca576143c96140a7565b5b6143d685828601614222565b9150509250929050565b600081519050919050565b600082825260208201905092915050565b60005b8381101561441a5780820151818401526020810190506143ff565b60008484015250505050565b6000614431826143e0565b61443b81856143eb565b935061444b8185602086016143fc565b61445481614114565b840191505092915050565b6000819050919050565b6144728161445f565b82525050565b600060a08301600083015184820360008601526144958282614426565b915050602083015184820360208601526144af8282614426565b91505060408301516144c46040860182614469565b5060608301516144d76060860182614469565b5060808301516144ea6080860182614469565b508091505092915050565b6000602082019050818103600083015261450f8184614478565b905092915050565b60006020828403121561452d5761452c6140a2565b5b600061453b848285016140f5565b91505092915050565b600082825260208201905092915050565b6000614560826143e0565b61456a8185614544565b935061457a8185602086016143fc565b61458381614114565b840191505092915050565b600060408201905081810360008301526145a88185614555565b905081810360208301526145bc8184614555565b90509392505050565b600080600080600060a086880312156145e1576145e06140a2565b5b60006145ef888289016140f5565b955050602086013567ffffffffffffffff8111156146105761460f6140a7565b5b61461c88828901614222565b945050604086013567ffffffffffffffff81111561463d5761463c6140a7565b5b61464988828901614222565b935050606086013567ffffffffffffffff81111561466a576146696140a7565b5b61467688828901614222565b925050608086013567ffffffffffffffff811115614697576146966140a7565b5b6146a388828901614222565b9150509295509295909350565b6000806000606084860312156146c9576146c86140a2565b5b600084013567ffffffffffffffff8111156146e7576146e66140a7565b5b6146f386828701614222565b9350506020614704868287016140f5565b925050604084013567ffffffffffffffff811115614725576147246140a7565b5b61473186828701614222565b9150509250925092565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b60006147738383614426565b905092915050565b6000602082019050919050565b60006147938261473b565b61479d8185614746565b9350836020820285016147af85614757565b8060005b858110156147eb57848403895281516147cc8582614767565b94506147d78361477b565b925060208a019950506001810190506147b3565b50829750879550505050505092915050565b600060208201905081810360008301526148178184614788565b905092915050565b60008060408385031215614836576148356140a2565b5b600083013567ffffffffffffffff811115614854576148536140a7565b5b61486085828601614222565b925050602083013567ffffffffffffffff811115614881576148806140a7565b5b61488d85828601614222565b9150509250929050565b6148a0816140cc565b82525050565b600060a0830160008301516148be6000860182614897565b50602083015184820360208601526148d68282614426565b915050604083015184820360408601526148f08282614426565b9150506060830151848203606086015261490a8282614426565b915050608083015184820360808601526149248282614426565b9150508091505092915050565b6000602082019050818103600083015261494b81846148a6565b905092915050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b600061498b8383614897565b60208301905092915050565b6000602082019050919050565b60006149af82614953565b6149b9818561495e565b93506149c48361496f565b8060005b838110156149f55781516149dc888261497f565b97506149e783614997565b9250506001810190506149c8565b5085935050505092915050565b60006060820190508181036000830152614a1c8186614788565b90508181036020830152614a308185614788565b90508181036040830152614a4481846149a4565b9050949350505050565b614a578161445f565b8114614a6257600080fd5b50565b600081359050614a7481614a4e565b92915050565b60008060408385031215614a9157614a906140a2565b5b6000614a9f858286016140f5565b9250506020614ab085828601614a65565b9150509250929050565b60006020820190508181036000830152614ad48184614555565b905092915050565b600060a082019050614af1600083018861435a565b8181036020830152614b038187614555565b90508181036040830152614b178186614555565b90508181036060830152614b2b8185614555565b90508181036080830152614b3f8184614555565b90509695505050505050565b614b54816142db565b8114614b5f57600080fd5b50565b600081359050614b7181614b4b565b92915050565b60008060408385031215614b8e57614b8d6140a2565b5b600083013567ffffffffffffffff811115614bac57614bab6140a7565b5b614bb885828601614222565b9250506020614bc985828601614b62565b9150509250929050565b60008060408385031215614bea57614be96140a2565b5b600083013567ffffffffffffffff811115614c0857614c076140a7565b5b614c1485828601614222565b9250506020614c25858286016140f5565b9150509250929050565b60006020820190508181036000830152614c4981846149a4565b905092915050565b614c5a8161445f565b82525050565b600060a0820190508181036000830152614c7a8188614555565b90508181036020830152614c8e8187614555565b9050614c9d6040830186614c51565b614caa6060830185614c51565b614cb76080830184614c51565b9695505050505050565b60006080820190508181036000830152614cdb8187614555565b90508181036020830152614cef8186614555565b9050614cfe604083018561435a565b8181036060830152614d1081846149a4565b905095945050505050565b6000606082019050614d30600083018661435a565b8181036020830152614d428185614555565b90508181036040830152614d5681846149a4565b9050949350505050565b6000602082019050614d756000830184614c51565b92915050565b600060a0820190508181036000830152614d958188614555565b90508181036020830152614da98187614555565b90508181036040830152614dbd8186614555565b9050614dcc60608301856142e7565b614dd9608083018461435a565b9695505050505050565b60008060008060008060c08789031215614e0057614dff6140a2565b5b6000614e0e89828a016140f5565b965050602087013567ffffffffffffffff811115614e2f57614e2e6140a7565b5b614e3b89828a01614222565b955050604087013567ffffffffffffffff811115614e5c57614e5b6140a7565b5b614e6889828a01614222565b9450506060614e7989828a01614a65565b9350506080614e8a89828a01614a65565b92505060a0614e9b89828a01614a65565b9150509295509295509295565b60008060008060008060c08789031215614ec557614ec46140a2565b5b6000614ed389828a016140f5565b965050602087013567ffffffffffffffff811115614ef457614ef36140a7565b5b614f0089828a01614222565b955050604087013567ffffffffffffffff811115614f2157614f206140a7565b5b614f2d89828a01614222565b945050606087013567ffffffffffffffff811115614f4e57614f4d6140a7565b5b614f5a89828a01614222565b935050608087013567ffffffffffffffff811115614f7b57614f7a6140a7565b5b614f8789828a01614222565b92505060a0614f9889828a016140f5565b9150509295509295509295565b600081905092915050565b6000614fbb826143e0565b614fc58185614fa5565b9350614fd58185602086016143fc565b80840191505092915050565b6000614fed8284614fb0565b915081905092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b6000600282049050600182168061503f57607f821691505b60208210810361505257615051614ff8565b5b50919050565b7f4c6f67696e20616c726561647920657869737400000000000000000000000000600082015250565b600061508e601383614544565b915061509982615058565b602082019050919050565b600060208201905081810360008301526150bd81615081565b9050919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b6000600883026151267fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff826150e9565b61513086836150e9565b95508019841693508086168417925050509392505050565b6000819050919050565b600061516d6151686151638461445f565b615148565b61445f565b9050919050565b6000819050919050565b61518783615152565b61519b61519382615174565b8484546150f6565b825550505050565b600090565b6151b06151a3565b6151bb81848461517e565b505050565b5b818110156151df576151d46000826151a8565b6001810190506151c1565b5050565b601f821115615224576151f5816150c4565b6151fe846150d9565b8101602085101561520d578190505b615221615219856150d9565b8301826151c0565b50505b505050565b600082821c905092915050565b600061524760001984600802615229565b1980831691505092915050565b60006152608383615236565b9150826002028217905092915050565b615279826143e0565b67ffffffffffffffff81111561529257615291614125565b5b61529c8254615027565b6152a78282856151e3565b600060209050601f8311600181146152da57600084156152c8578287015190505b6152d28582615254565b86555061533a565b601f1984166152e8866150c4565b60005b82811015615310578489015182556001820191506020850194506020810190506152eb565b8683101561532d5784890151615329601f891682615236565b8355505b6001600288020188555050505b505050505050565b7f596f7520616c726561647920646f20616374696f6e0000000000000000000000600082015250565b6000615378601583614544565b915061538382615342565b602082019050919050565b600060208201905081810360008301526153a78161536b565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b60006153e88261445f565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff820361541a576154196153ae565b5b600182019050919050565b7f5573657220646f65736e74206578697374000000000000000000000000000000600082015250565b600061545b601183614544565b915061546682615425565b602082019050919050565b6000602082019050818103600083015261548a8161544e565b9050919050565b7f57726f6e672070617373776f7264000000000000000000000000000000000000600082015250565b60006154c7600e83614544565b91506154d282615491565b602082019050919050565b600060208201905081810360008301526154f6816154ba565b9050919050565b7f53686f7020646f65736e74206578697374000000000000000000000000000000600082015250565b6000615533601183614544565b915061553e826154fd565b602082019050919050565b6000602082019050818103600083015261556281615526565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b60006155a38261445f565b91506155ae8361445f565b92508282039050818111156155c6576155c56153ae565b5b92915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603160045260246000fd5b7f596f75206e6f742062616e6b0000000000000000000000000000000000000000600082015250565b6000615631600c83614544565b915061563c826155fb565b602082019050919050565b6000602082019050818103600083015261566081615624565b9050919050565b60006156728261445f565b915061567d8361445f565b9250828201905080821115615695576156946153ae565b5b92915050565b6000815490506156aa81615027565b9050919050565b60008190508160005260206000209050919050565b8181036156d45750506157ac565b6156dd8261569b565b67ffffffffffffffff8111156156f6576156f5614125565b5b6157008254615027565b61570b8282856151e3565b6000601f83116001811461573a5760008415615728578287015490505b6157328582615254565b8655506157a5565b601f198416615748876156b1565b9650615753866150c4565b60005b8281101561577b57848901548255600182019150600185019450602081019050615756565b868310156157985784890154615794601f891682615236565b8355505b6001600288020188555050505b5050505050505b56fea26469706673582212208a5ccbd644ff6b4630f9e7a9cd74b9e00214c7cf99dd7fe4a2a8f88c77e8354f64736f6c637828302e382e31382d646576656c6f702e323032322e392e31362b636f6d6d69742e31666265653832350059"

    coinbase = w3.eth.coinbase


    contract = None

    @classmethod
    def create_account(cls,password:str,ether:int = 0)->str:
        address = w3.geth.personal.new_account(password)
        w3.eth.send_transaction({
            "from":cls.coinbase,
            "to": address,
            "value":w3.toWei(ether,"ether")
        })
        w3.geth.personal.unlock_account(address,password,86400)
        return address

    @classmethod
    def unlock(cls,user_dto:UserDTO):
        w3.geth.personal.unlock_account(user_dto.address,user_dto.password)

    @classmethod
    def deploy(cls,bank):
        contract = w3.eth.contract(abi=cls.abi,bytecode=cls.bin)
        hash = contract.constructor(bank).transact({
            "from":cls.coinbase,
        })
        transaction = w3.eth.wait_for_transaction_receipt(hash)
        contract = w3.eth.contract(abi=cls.abi,address=transaction.contractAddress)
        cls.contract = contract
    
    @classmethod
    def call(cls,*args,fun_name,sender = None):
        try:
            data = cls.contract.functions[fun_name](*args).call({
                "from":sender or cls.coinbase
            })
            return True,data
        except exceptions.SolidityError as e:
            return False,e.args[0]
        except exceptions.ValidationError as e:
            return False,e.args[0]

    @classmethod
    def transact(cls,*args,fun_name,ether = 0,sender = None):
        try:
            data = cls.contract.functions[fun_name](*args).transact({
                "from":sender or cls.coinbase,
                "value":w3.toWei(ether,"ether")
            })
            w3.eth.wait_for_transaction_receipt(data)
            return True,"Transaction successful"
        except exceptions.SolidityError as e:
            return False,e.args[0]
        except exceptions.ValidationError as e:
            return False,e.args[0]
        except ValueError as e:
            return False,"Please Login again"

    @classmethod
    def balance(cls,address):
        return w3.fromWei(w3.eth.get_balance(address),"ether")

    

class Roles:
    BUYER = "buyer"
    SELLER = "seller"
    ADMIN = "admin"
    BANK = "bank"
    PROVIDER = "provider"

